# name: Run notebooks every 10 minutes

# on:
#   schedule:
#     - cron: "*/10 * * * *"   # every 10 minutes UTC
#   workflow_dispatch:          # allows manual run

# jobs:
#   run-notebooks:
#     runs-on: ubuntu-latest

#     steps:
#       # 1️⃣ Checkout the repository
#       - name: Checkout repo
#         uses: actions/checkout@v4

#       # 2️⃣ Set up Python
#       - name: Set up Python
#         uses: actions/setup-python@v5
#         with:
#           python-version: "3.12"

#       # 3️⃣ Install dependencies
#       - name: Install dependencies
#         run: |
#           pip install --upgrade pip
#           pip install -r requirements.txt

#       # 4️⃣ Run main.ipynb
#       - name: Run main.ipynb
#         env:
#           TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
#           GROUP_CHAT_ID: ${{ secrets.GROUP_CHAT_ID }}
#         run: |
#           jupyter nbconvert --to notebook --execute main.ipynb --inplace --ExecutePreprocessor.timeout=600

#       # 5️⃣ Run ratio.ipynb
#       - name: Run ratio.ipynb
#         env:
#           TELEGRAM_TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
#           GROUP_CHAT_ID: ${{ secrets.GROUP_CHAT_ID }}
#         run: |
#           jupyter nbconvert --to notebook --execute ratio.ipynb --inplace --ExecutePreprocessor.timeout=600

#       # 6️⃣ Commit and push only updated notebooks and CSVs
#       - name: Auto-commit changes
#         uses: stefanzweifel/git-auto-commit-action@v5
#         with:
#           commit_message: "[Bot] Automated changes from workflow"
#           file_pattern: "*.csv,*.ipynb"
#           commit_user_name: "github-actions[bot]"
#           commit_user_email: "41898282+github-actions[bot]@users.noreply.github.com"
#           push: true
#         env:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

